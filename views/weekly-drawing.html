<section id="design-wrap">
	<div class="content">
		<div class="grid">
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-3year.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-3year.png" alt="spoon 2016-12-25" />
					<div class="description description--grid">벌써 3년</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-christmas.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-christmas.png" alt="spoon 2016-12-03" />
					<div class="description description--grid">모두들 크리스마스</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-bear.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-bear.png" alt="spoon 2016-11-27" />
					<div class="description description--grid">얼음이 그렇게 녹고 있다는데...</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-map01.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-map01.png" alt="spoon 2016-11-27" />
					<div class="description description--grid">도서 진도표 (열심히 일하는 중)</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-map02.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-map02.png" alt="spoon 2016-11-27" />
					<div class="description description--grid">도서 진도표 (열심히 일하는 중)</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-shootingstar.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-shootingstar.png" alt="jeju 2016-09-13" />
					<div class="description description--grid">하늘에서 비처럼 쏟아진다고 했건만....</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-logo.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-logo.png" alt="ColorBridge 2016-08-14" />
					<div class="description description--grid">New logo!</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-zootopia.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-zootopia.png" alt="ZOOTOPIA 2016-03-13" />
					<div class="description description--grid">I saw the movie | ZOOTOPIA</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-zootopia-elephant.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-zootopia-elephant.png" alt="ZOOTOPIA 2016-03-13" />
					<div class="description description--grid">I saw the movie | ZOOTOPIA</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-codejs.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-codejs.png" alt="codejs 2016-03-03" />
					<div class="description description--grid">your my hero!</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-deadpool.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-deadpool-thum.png" alt="deadpool 2016-02-29" />
					<div class="description description--grid">I saw the movie | DEADPOOL</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-three-finger.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-three-finger-thum.png" alt="threeFinger 2016-02-18" />
					<div class="description description--grid">Three Finger</div>
				</a>
			</div>
			<div class="grid__item" data-size="1200x600">
				<a href="contents/img/drawing/weekly-adventure.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-adventure-thum.png" alt="adventure Time 2016-01-09" />
					<div class="description description--grid">AFTER KIDULT &amp; HOBBY EXPO 2016</div>
				</a>
			</div>
			<div class="grid__item" data-size="778x650">
				<a href="contents/img/drawing/weekly-sherlock.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-sherlock-thum.png" alt="SHERLOCK THE ABOMINABLE BRIDE 2016-01-02" />
					<div class="description description--grid">I saw the movie.</div>
				</a>
			</div>
			<div class="grid__item" data-size="915x738">
				<a href="contents/img/drawing/weekly-icons.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-icons-thum.png" alt="Line icons" />
					<div class="description description--grid">Line icons</div>
				</a>
			</div>
			<div class="grid__item" data-size="1000x800">
				<a href="contents/img/drawing/weekly-sieun.png" class="img-wrap">
					<img src="contents/img/drawing/weekly-sieun.png" alt="Company Colleague" />
					<div class="description description--grid">Good bye Company Colleague</div>
				</a>
			</div>
			<div class="grid__item" data-size="814x314">
				<a href="contents/img/drawing/rabbit.svg" class="img-wrap">
					<img src="contents/img/drawing/rabbit-thum.png" alt="rabbit" />
					<div class="description description--grid">2015 special rabbit</div>
				</a>
			</div>
		</div><!-- /grid -->
		<div class="preview">
			<button class="action action--close">
				<i class="fa fa-times"></i>
				<span class="text-hidden">Close</span>
				</button>
			<div class="description description--preview"></div>
		</div><!-- /preview -->
	</div><!-- /content -->
</section>

<script src="contents/js/lib/design_grid/modernizr-custom.js"></script>
<script src="contents/js/lib/design_grid/imagesloaded.pkgd.min.js"></script>
<script src="contents/js/lib/design_grid/masonry.pkgd.min.js"></script>
<script src="contents/js/lib/design_grid/classie.js"></script>
<script src="contents/js/lib/design_grid/main.js"></script>
<script>
	(function() {
		// create SVG circle overlay and append it to the preview element
		function createCircleOverlay(previewEl) {
			var dummy = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
			dummy.setAttributeNS(null, 'version', '1.1');
			dummy.setAttributeNS(null, 'width', '100%');
			dummy.setAttributeNS(null, 'height', '100%');
			dummy.setAttributeNS(null, 'class', 'overlay');
			var g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
			var circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
			circle.setAttributeNS(null, 'cx', 0);
			circle.setAttributeNS(null, 'cy', 0);
			circle.setAttributeNS(null, 'r', Math.sqrt(Math.pow(previewEl.offsetWidth,2) + Math.pow(previewEl.offsetHeight,2)));
			dummy.appendChild(g);
			g.appendChild(circle);
			previewEl.appendChild(dummy);
		}

		new GridFx(document.querySelector('.grid'), {
			onInit : function(instance) {
				createCircleOverlay(instance.previewEl);
			},
			onResize : function(instance) {
				instance.previewEl.querySelector('svg circle').setAttributeNS(null, 'r', Math.sqrt(Math.pow(instance.previewEl.offsetWidth,2) + Math.pow(instance.previewEl.offsetHeight,2)));
			},
			onOpenItem : function(instance, item) {
				// item's image
				var gridImg = item.querySelector('img'),
					gridImgOffset = gridImg.getBoundingClientRect(),
					win = {width: document.documentElement.clientWidth, height: window.innerHeight},
					SVGCircleGroupEl = instance.previewEl.querySelector('svg > g'),
					SVGCircleEl = SVGCircleGroupEl.querySelector('circle');

				SVGCircleEl.setAttributeNS(null, 'r', Math.sqrt(Math.pow(instance.previewEl.offsetWidth,2) + Math.pow(instance.previewEl.offsetHeight,2)));
				// set the transform for the SVG g node. This will animate the circle overlay. The origin of the circle depends on the position of the clicked item.
				if( gridImgOffset.left + gridImg.offsetWidth/2 < win.width/2 ) {
					SVGCircleGroupEl.setAttributeNS(null, 'transform', 'translate(' + win.width + ', ' + (gridImgOffset.top + gridImg.offsetHeight/2 < win.height/2 ? win.height : 0) + ')');
				}
				else {
					SVGCircleGroupEl.setAttributeNS(null, 'transform', 'translate(0, ' + (gridImgOffset.top + gridImg.offsetHeight/2 < win.height/2 ? win.height : 0) + ')');
				}
			}
		});
	})();
</script>
